---

- name: vagrant optimization
  hosts: all
  remote_user: "{{ deploy_user }}"
  sudo: yes

  roles:
    - common

  post_tasks:
    - set_fact:
        common_required: false

- name: database setup
  hosts: database
  remote_user: "{{ deploy_user }}"
  sudo: yes

  roles:
    - common
    - postgres

- name: fedora setup
  hosts: fedora
  remote_user: "{{ deploy_user }}"
  sudo: yes

  roles:
    - common
    - fcrepo4

- name: camel setup
  hosts: camel
  remote_user: "{{ deploy_user }}"
  sudo: yes

  roles:
    - common
    # - tomcat7
    - camel
    - fcrepo-camel

- name: solr setup
  hosts: solr
  remote_user: "{{ deploy_user }}"
  sudo: yes

  roles:
    - common
    - solr

- name: fuseki setup
  hosts: fuseki
  remote_user: "{{ deploy_user }}"
  sudo: yes

  roles:
    - common
    - fuseki

- name: webserver setup
  hosts: webserver
  remote_user: "{{ deploy_user }}"
  sudo: yes

  roles:
    - common
    - islandora

# and at the end would be djatoka
